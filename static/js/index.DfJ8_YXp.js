import{j as e,c as C,r as v}from"../../main/index-BeFG-ZSe.js";import{f as $,F as _,a as P}from"./formatters.CQH024bt.js";function b(a){const{color:t,activeOuterArcPath:r}=a;return e.jsx("path",{d:r,stroke:"none",fill:t})}const G={pieChart:"tk-custom-pie-chart"},u={radius:{small:250,large:385},centerPoint:{x:500,y:400},height:800,width:1e3},N="_legend_1mgho_1",E="_legendScrollbar_1mgho_11",M="_legendContent_1mgho_17",L="_legendContentItem_1mgho_24",R="_legendContentItemIcon_1mgho_31",V="_legendContentItemLabel_1mgho_38",x={legend:N,legendScrollbar:E,legendContent:M,legendContentItem:L,legendContentItemIcon:R,legendContentItemLabel:V};function k(a){const{pieChartData:t,setActiveSlice:r,xValueFormatter:s}=a;return e.jsx("div",{className:x.legend,children:e.jsx("div",{className:x.legendScrollbar,children:e.jsx("div",{className:x.legendContent,children:t.map((n,l)=>{const{name:o,color:i}=n;return e.jsxs("div",{className:x.legendContentItem,onMouseEnter:()=>r(n),onMouseLeave:()=>r({}),children:[e.jsx("div",{className:x.legendContentItemIcon,style:{backgroundColor:i}}),e.jsx("div",{className:x.legendContentItemLabel,title:o,style:{color:i},children:s(o)})]},l)})})})})}function z(a){const{radius:t,percentFormatted:r,middleDirection:s,labelDistanceFromCenter:n,fontSize:l}=a;return e.jsxs("text",{x:u.centerPoint.x+n*t*s.xDirection,y:u.centerPoint.y+n*t*s.yDirection,textAnchor:"middle",style:{fontSize:l,fill:"white",userSelect:"none",alignmentBaseline:"central"},children:[r,"%"]})}const T="_pieSlice_11mtc_1",B={pieSlice:T};function O(a){const{path:t,color:r,isActive:s}=a;return e.jsx("path",{fill:r,d:t,strokeWidth:"4",stroke:"white",className:C(B.pieSlice,s&&"pie-chart-active-slice")})}const H="_pieChartTooltip_yjgea_1",W={pieChartTooltip:H},U=300,Z=150;function J(a){const{name:t,value:r,color:s,percentFormatted:n,radius:l,middleDirection:o,xValueFormatter:i,yValueFormatter:c,yValueSuffix:d}=a,h=i(t),f=c(r),m=u.centerPoint.x+l*.5*o.xDirection,p=u.centerPoint.y+l*.5*o.yDirection;return e.jsxs(e.Fragment,{children:[e.jsx("rect",{x:m,y:p,width:U,height:Z,fill:"white",stroke:"black",strokeWidth:2,rx:10,className:C("pie-chart-tooltip",W.pieChartTooltip),style:{pointerEvents:"none"}}),e.jsxs("text",{x:m+20,y:p+40,fill:s,fontSize:32,fontWeight:"bold",style:{pointerEvents:"none"},children:["Name: ",h]}),e.jsxs("text",{x:m+20,y:p+95,fill:"black",fontSize:24,fontWeight:"thin",style:{pointerEvents:"none"},className:"pie-chart-tooltip-value",children:["Value: ",f,d??""]}),e.jsxs("text",{x:m+20,y:p+130,fill:"black",fontSize:24,fontWeight:"thin",style:{pointerEvents:"none"},className:"pie-chart-tooltip-percent",children:["Percent: ",n,"%"]})]})}function A(a){return{xDirection:Math.cos(a),yDirection:Math.sin(a)}}function g(a){const{radius:t,angleInRadians:r}=a,s=A(r),n=u.centerPoint.x+s.xDirection*t,l=u.centerPoint.y+s.yDirection*t;return{x:n,y:l}}function K(a){const{innerRadius:t,outerRadius:r,startAngle:s,endAngle:n}=a,l=g({radius:t,angleInRadians:Math.PI+s}),o=g({radius:t,angleInRadians:Math.PI+n}),i=g({radius:r,angleInRadians:Math.PI+s}),c=g({radius:r,angleInRadians:Math.PI+n}),d=n-s<=Math.PI?0:1;return`
  M ${i.x} ${i.y}
  A ${r} ${r} 0 ${d} 1 ${c.x} ${c.y}
  L ${o.x} ${o.y}
  A ${t} ${t} 0 ${d} 0 ${l.x} ${l.y}
  Z`}function Y(a){const{percent:t}=a;return t<=.03?24:40}const q=a=>a>=1e6?new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:2}).format(a):new Intl.NumberFormat("en-US").format(a);function Q(a){const{settings:t}=a;return{legend:{show:t?.legend?.show??!0,props:{xValueFormatter:t?.legend?.xValueFormatter??(s=>$(s,10))}},tooltip:{props:{yValueSuffix:t?.tooltip?.unit??"",xValueFormatter:t?.tooltip?.xValueFormatter??_.category,yValueFormatter:t?.tooltip?.yValueFormatter??q}}}}function X(a){const{startAngle:t,endAngle:r,radius:s}=a,n=g({radius:s,angleInRadians:Math.PI+t}),l=g({radius:s,angleInRadians:Math.PI+r}),o=A(Math.PI+(t+r)/2),i=r-t<=Math.PI?0:1,c=`M ${u.centerPoint.x},${u.centerPoint.y} 
                  L ${n.x},${n.y} 
                  A ${s},${s} 0 ${i} 1 ${l.x},${l.y} 
                  Z`,d=.005,h=K({startAngle:t+d,endAngle:r-d,innerRadius:s+6,outerRadius:s+12});return{path:c,activeOuterArcPath:h,middleDirection:o,arcStartPoint:n,arcEndPoint:l}}function ee(a){const{data:t,radius:r}=a,s=t.reduce((o,i)=>o+i.value,0),n=t.map((o,i)=>{const c=o.value/s;return{...o,color:o.color??P[i%P.length],percent:c,percentFormatted:Math.floor(c*100),angle:c*2*Math.PI}});n[0].startAngle=0,n[0].endAngle=n[0].angle;for(let o=1;o<n.length;o++)n[o].startAngle=n[o-1].endAngle,n[o].endAngle=n[o-1].endAngle+n[o].angle;return n.map(o=>{const{startAngle:i,endAngle:c}=o,d=X({startAngle:i,endAngle:c,radius:r});return{...o,...d}})}const te="_pieChart_8xt9t_1",ne={pieChart:te};function y(a){const{data:t,settings:r,className:s}=a,[n,l]=v.useState({}),{data:o,radius:i}=v.useMemo(()=>{const d=u.radius.large,h=t.toSorted((m,p)=>m.value>p.value?-1:1);return{data:ee({data:h,radius:d}),radius:d}},[t]),c=v.useMemo(()=>Q({settings:r}),[r]);return e.jsxs("div",{className:C(G.pieChart,ne.pieChart,s),children:[c.legend.show&&e.jsx(k,{pieChartData:o,setActiveSlice:l,...c.legend.props}),e.jsxs("svg",{viewBox:`0 0 ${u.width} ${u.height}`,xmlns:"http://www.w3.org/2000/svg",style:{fontFamily:"Hiragino Sans GB,Arial,sans-serif"},children:[o.map((d,h)=>{const{name:f,percent:m,percentFormatted:p,color:j,middleDirection:w,activeOuterArcPath:S,path:I}=d,D=.9-.65*m,F=Y({percent:m});return e.jsxs("g",{onMouseEnter:()=>l(d),onMouseLeave:()=>l({}),children:[e.jsx(O,{path:I,color:j,isActive:f===n.name}),m>.01&&e.jsx(z,{radius:i,percentFormatted:p,middleDirection:w,labelDistanceFromCenter:D,fontSize:F}),n.name===f&&e.jsx(b,{color:j,activeOuterArcPath:S})]},h)}),n.name&&e.jsx(J,{name:n.name,radius:i,value:n.value,color:n.color,percentFormatted:n.percentFormatted,middleDirection:n.middleDirection,...c.tooltip.props})]})]})}const ae=[{name:"Group A",value:400},{name:"Group B",value:300},{name:"Group C",value:300},{name:"Group D",value:200}];function oe(){return e.jsxs("div",{className:"flex w-full max-w-xl grow flex-col items-start justify-start gap-6 overflow-auto border p-6",children:[e.jsx("div",{className:"text-xl font-bold",children:"• Example 1:"}),e.jsx("p",{children:"Basic PieChart:"}),e.jsx(y,{data:ae})]})}const re=[{name:"Group A",value:20},{name:"Group B",value:.8},{name:"Group C",value:4},{name:"Group D",value:1},{name:"Group E",value:1},{name:"Group F",value:.3},{name:"Group G",value:.1}];function se(){return e.jsxs("div",{className:"flex w-full max-w-xl grow flex-col items-start justify-start gap-6 border p-6",children:[e.jsx("div",{className:"text-xl font-bold",children:"• Example 2:"}),e.jsx("p",{children:"How it looks when slices are small:"}),e.jsx("div",{className:"size-full max-h-lg max-w-lg",children:e.jsx(y,{data:re})})]})}const le=[{name:"Group A",value:99},{name:"Group B",value:28},{name:"Group C",value:4},{name:"Group D",value:21},{name:"Group E",value:31},{name:"Group F",value:51},{name:"Group G",value:21},{name:"Group H",value:31},{name:"Group I",value:71},{name:"Group J",value:41},{name:"Group K",value:51},{name:"Group L",value:11}];function ie(){return e.jsxs("div",{className:"flex h-xl w-full max-w-xl grow flex-col items-start justify-start gap-6 border p-6",children:[e.jsx("div",{className:"text-xl font-bold",children:"• Example 3:"}),e.jsx("p",{children:"How it looks when there are many slices: (scrollable legend)"}),e.jsx("div",{className:"size-full max-h-lg max-w-lg",children:e.jsx(y,{data:le})})]})}function ue(){return e.jsxs("div",{className:"flex size-full flex-col items-start justify-start gap-10 overflow-auto p-6",children:[e.jsx("h1",{className:"self-center text-3xl font-bold",children:"PieChart Examples"}),e.jsxs("div",{className:"size-full space-y-10",children:[e.jsx(oe,{}),e.jsx(se,{}),e.jsx(ie,{})]})]})}export{ue as default};
//# sourceMappingURL=index.W6NThMtw.js.map
